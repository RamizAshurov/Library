<html>
    <head>
        <title>Библиотека</title>
        <link href = "style.css" rel = "stylesheet">
    </head>
    <body>
        <header>
            <ul class = "about">
                <li>Help Center</li>
                <li>Our Support</li>
                <li>User Name</li>
            </ul>
        </header>
        <sidebar>
            <div class = "wrapper-add-a-book">
                <div class = "add-a-book">ADD A BOOK</div>
            </div>
            <nav class = "first-menu">
                <ul class = "first-menu-list">
                    <li class = "first-menu-list-item">Now Reading</li>
                    <li class = "first-menu-list-item">Browse</li>
                    <li class = "first-menu-list-item">Buy Books</li>
                    <li class = "first-menu-list-item">Favorite Books</li>
                    <li class = "first-menu-list-item">Wishlist</li>
                    <li class = "first-menu-list-item">History</li>
                </ul>
            </nav>
            <nav class = "second-menu">
                <ul class = "second-menu-list">
                    <li class = "second-menu-list-item">Must Read Titles</li>
                    <li class = "second-menu-list-item">Best Of List</li>
                    <li class = "second-menu-list-item">Classic Novels</li>
                    <li class = "second-menu-list-item">Non Fiction</li>
                </ul>
            </nav>
            <nav class = "thrid-menu">
                <ul class = "thrid-menu-list">
                    <li class = "thrid-menu-list-item">
                        <ul>
                            <li>You added The Trial by Franz Kafka to your Must Read Titles.</li>
                            <li>48 minutes ago</li>
                        </ul>
                    </li>
                    <li class = "thrid-menu-list-item">
                        <ul>
                            <li>You added Fight Club by Chuck Palahniuk to your Must Read Titles.</li>
                            <li>24 minutes ago</li>
                        </ul>
                    </li>
                </ul>
            </nav>
            <nav></nav>
        </sidebar>
        <main>
            <div class = "main-header">
                <div class = "main-header-title">
                    <p>Browse Available Books</p>
                </div>
                <div class = "main-header-navigation">
                    <nav class = "main-header-navigation-menu">
                        <ul class = "main-header-navigation-menu-list">
                            <li class = "main-header-navigation-menu-list-item selected">All Books</li>
                            <li class = "main-header-navigation-menu-list-item">Most Recent</li>
                            <li class = "main-header-navigation-menu-list-item">Most Popular</li>
                            <li class = "main-header-navigation-menu-list-item">Free Books</li>
                        </ul>
                    </nav>
                    <form>
                        <input type = "search" placeholder = "Enter Keywords">
                    </form>
                </div>
            </div>
            <div class = "main-content">
                <div class = "book-container" data-price = "0" data-time = "Thu May 17 2018 9:09:13 GMT+0400 (Московское время (лето))">
                    <img src = "book-cover (2).png">
                    <p class = "book-name">Jewels of Nezam</p>
                    <p class = "author">by Geeta Devi</p>
                    <div class = "rating">
                        <input type = "radio" name = "star1" id = "star-1" value = "5">
                        <label for = "star-1"></label>
                        <input type = "radio" name = "star1" id = "star-2" value = "4">
                        <label for = "star-2"></label>
                        <input type = "radio" name = "star1" id = "star-3" value = "3">
                        <label for = "star-3"></label>
                        <input type = "radio" name = "star1" id = "star-4" value = "2">
                        <label for = "star-4"></label>
                        <input type = "radio" name = "star1" id = "star-5" value = "1">
                        <label for = "star-5"></label>
                    </div>
                </div>
                <div class = "book-container" data-price = "0" data-time = "Thu May 17 2018 9:15:13 GMT+0400 (Московское время (лето))">
                    <img src = "book-cover (1).png">
                    <p class = "book-name">Cakes & Bakes</p>
                    <p class = "author">by Sanjeev Kapoor</p>
                    <div class = "rating">
                        <input type = "radio" name = "star2" id = "star-6" value = "5">
                        <label for = "star-6"></label>
                        <input type = "radio" name = "star2" id = "star-7" value = "4">
                        <label for = "star-7"></label>
                        <input type = "radio" name = "star2" id = "star-8" value = "3">
                        <label for = "star-8"></label>
                        <input type = "radio" name = "star2" id = "star-9" value = "2">
                        <label for = "star-9"></label>
                        <input type = "radio" name = "star2" id = "star-10" value = "1">
                        <label for = "star-10"></label>
                    </div>
                </div>
                <div class = "book-container" data-price = "0" data-time = "Thu May 17 2018 9:20:13 GMT+0400 (Московское время (лето))">
                    <img src = "book-cover (3).png">
                    <p class = "book-name">Jamie's Kitchen</p>
                    <p class = "author">by Jamie Oliver</p>
                    <div class = "rating">
                        <input type = "radio" name = "star3" id = "star-11" value = "5">
                        <label for = "star-11"></label>
                        <input type = "radio" name = "star3" id = "star-12" value = "4">
                        <label for = "star-12"></label>
                        <input type = "radio" name = "star3" id = "star-13" value = "3">
                        <label for = "star-13"></label>
                        <input type = "radio" name = "star3" id = "star-14" value = "2">
                        <label for = "star-14"></label>
                        <input type = "radio" name = "star3" id = "star-15" value = "1">
                        <label for = "star-15"></label>
                    </div>
                </div>
                <div class = "book-container" data-price = "0" data-time = "Thu May 17 2018 9:25:13 GMT+0400 (Московское время (лето))">
                    <img src = "book-cover (4).png">
                    <p class = "book-name">Inexpensive Family Meals</p>
                    <p class = "author">by Simon Holst</p>
                    <div class = "rating">
                        <input type = "radio" name = "star4" id = "star-16" value = "5">
                        <label for = "star-16"></label>
                        <input type = "radio" name = "star4" id = "star-17" value = "4">
                        <label for = "star-17"></label>
                        <input type = "radio" name = "star4" id = "star-18" value = "3">
                        <label for = "star-18"></label>
                        <input type = "radio" name = "star4" id = "star-19" value = "2">
                        <label for = "star-19"></label>
                        <input type = "radio" name = "star4" id = "star-20" value = "1">
                        <label for = "star-20"></label>
                    </div>
                </div>
                <div class = "book-container" data-price = "0" data-time = "Thu May 17 2018 9:30:13 GMT+0400 (Московское время (лето))">
                    <img src = "book-cover (5).png">
                    <p class = "book-name">Paleo Slow Cooking</p>
                    <p class = "author">by Chrissy Gower</p>
                    <div class = "rating">
                        <input type = "radio" name = "star5" id = "star-21" value = "5">
                        <label for = "star-21"></label>
                        <input type = "radio" name = "star5" id = "star-22" value = "4">
                        <label for = "star-22"></label>
                        <input type = "radio" name = "star5" id = "star-23" value = "3">
                        <label for = "star-23"></label>
                        <input type = "radio" name = "star5" id = "star-24" value = "2">
                        <label for = "star-24"></label>
                        <input type = "radio" name = "star5" id = "star-25" value = "1">
                        <label for = "star-25"></label>
                    </div>
                </div>
                <div class = "book-container" data-price = "0" data-time = "Thu May 17 2018 9:34:13 GMT+0400 (Московское время (лето))">
                    <img src = "book-cover (6).png">
                    <p class = "book-name">Cook Like an Italian</p>
                    <p class = "author">by Tobie Puttock</p>
                    <div class = "rating">
                        <input type = "radio" name = "star6" id = "star-26" value = "5">
                        <label for = "star-26"></label>
                        <input type = "radio" name = "star6" id = "star-27" value = "4">
                        <label for = "star-27"></label>
                        <input type = "radio" name = "star6" id = "star-28" value = "3">
                        <label for = "star-28"></label>
                        <input type = "radio" name = "star6" id = "star-29" value = "2">
                        <label for = "star-29"></label>
                        <input type = "radio" name = "star6" id = "star-30" value = "1">
                        <label for = "star-30"></label>
                    </div>
                </div>
                <div class = "book-container" data-price = "0" data-time = "Thu May 17 2018 9:40:13 GMT+0400 (Московское время (лето))">
                    <img src = "book-cover (7).png">
                    <p class = "book-name">Suneeta Vaswani</p>
                    <p class = "author">by Geeta Devi</p>
                    <div class = "rating">
                        <input type = "radio" name = "star7" id = "star-31" value = "5">
                        <label for = "star-31"></label>
                        <input type = "radio" name = "star7" id = "star-32" value = "4">
                        <label for = "star-32"></label>
                        <input type = "radio" name = "star7" id = "star-33" value = "3">
                        <label for = "star-33"></label>
                        <input type = "radio" name = "star7" id = "star-34" value = "2">
                        <label for = "star-34"></label>
                        <input type = "radio" name = "star7" id = "star-35" value = "1">
                        <label for = "star-35"></label>
                    </div>
                </div>
                <div class = "book-container" data-price = "100">
                    <img src = "book-cover (8).png" data-time = "Thu May 17 2018 9:44:13 GMT+0400 (Московское время (лето))">
                    <p class = "book-name">Jamie Does</p>
                    <p class = "author">by Jamie Oliver</p>
                    <div class = "rating">
                        <input type = "radio" name = "star8" id = "star-36" value = "5">
                        <label for = "star-36"></label>
                        <input type = "radio" name = "star8" id = "star-37" value = "4">
                        <label for = "star-37"></label>
                        <input type = "radio" name = "star8" id = "star-38" value = "3">
                        <label for = "star-38"></label>
                        <input type = "radio" name = "star8" id = "star-39" value = "2">
                        <label for = "star-39"></label>
                        <input type = "radio" name = "star8" id = "star-40" value = "1">
                        <label for = "star-40"></label>
                    </div>
                </div>
                <div class = "book-container" data-price = "200" data-time = "Thu May 17 2018 9:49:13 GMT+0400 (Московское время (лето))">
                    <img src = "book-cover (9).png">
                    <p class = "book-name">Jamie's italy</p>
                    <p class = "author">by Sanjeev Kapoor</p>
                    <div class = "rating">
                        <input type = "radio" name = "star9" id = "star-41" value = "5">
                        <label for = "star-41"></label>
                        <input type = "radio" name = "star9" id = "star-42" value = "4">
                        <label for = "star-42"></label>
                        <input type = "radio" name = "star9" id = "star-43" value = "3">
                        <label for = "star-43"></label>
                        <input type = "radio" name = "star9" id = "star-44" value = "2">
                        <label for = "star-44"></label>
                        <input type = "radio" name = "star9" id = "star-45" value = "1">
                        <label for = "star-45"></label>
                    </div>
                </div>
                <div class = "book-container" data-price = "300" data-time = "Thu May 17 2018 9:50:13 GMT+0400 (Московское время (лето))">
                    <img src = "book-cover (10).png">
                    <p class = "book-name">Vegetables Cookbook</p>
                    <p class = "author">by Matthew Biggs</p>
                    <div class = "rating">
                        <input type = "radio" name = "star10" id = "star-46" value = "5">
                        <label for = "star-46"></label>
                        <input type = "radio" name = "star10" id = "star-47" value = "4">
                        <label for = "star-47"></label>
                        <input type = "radio" name = "star10" id = "star-48" value = "3">
                        <label for = "star-48"></label>
                        <input type = "radio" name = "star10" id = "star-49" value = "2">
                        <label for = "star-49"></label>
                        <input type = "radio" name = "star10" id = "star-50" value = "1">
                        <label for = "star-50"></label>
                    </div>
                </div>
            </div>
        </main>
        <footer>
            <div class = "help"></div>
            <div class = "settings"></div>
        </footer>
        <div class = "new-book-wrapper" hidden>
                <form class = "new-book">
                    <div class = "close-button"></div>
                    <div>
                        <label for = "name">Name</label>
                        <input type = "text" id = "name" required>
                    </div>
                    <div>
                        <label for = "author">Author</label>
                        <input type = "text" id = "author" required>
                    </div>
                    <div>
                        <label for = "price">Price</label>
                        <input type = "number" min = "0" id = "price" required>
                    </div>
                    <input type = "file" id = "img" required>
                    <div class = "submit">Отправить</div>
                </form>
        </div>
        <script>
            var allBooks = document.body.querySelectorAll(".book-container"),
                prevTarget = document.querySelector(".main-header-navigation-menu-list-item"),
                newBook = document.querySelector(".new-book-wrapper").cloneNode(true),
                bookClone = document.querySelector(".book-container").cloneNode(true);
            document.getElementsByClassName("main-header-navigation-menu-list")[0].onclick = function(event) {
                if (event.target.tagName == "LI") {
                    for (var i = 0; i < this.children.length; i++) {
    	                this.children[i].classList.remove("selected")
                    }
                    event.target.classList.add("selected")
                } 
            }
            document.getElementsByClassName("main-header-navigation-menu-list-item")[0].onclick = showAllBooks
            document.getElementsByClassName("main-header-navigation-menu-list-item")[1].onclick = function() {
                if (prevTarget.compareDocumentPosition(this) == 0) return
                showAllBooks()
                document.querySelector(".main-content").innerHTML = "";
                document.querySelector(".main-content").appendChild(allBooks[allBooks.length-1])
                prevTarget = this
            }
            document.getElementsByClassName("main-header-navigation-menu-list-item")[2].onclick = function() {
                if (prevTarget.compareDocumentPosition(this) == 0) return
                showAllBooks()
                var rating = document.body.querySelectorAll("input[value = '5']");
                for (var i = 0; i < rating.length; i++) {
                    if (!rating[i].checked) rating[i].closest(".book-container").remove()
                }
                prevTarget = this
            }
            document.getElementsByClassName("main-header-navigation-menu-list-item")[3].onclick = function() {
                if (prevTarget.compareDocumentPosition(this) == 0) return
                showAllBooks()
                var books = document.body.querySelectorAll(".book-container");
                for (var i = 0; i < books.length; i++) {
                    if (books[i].dataset.price != 0) books[i].remove()
                }
                prevTarget = this
            }
            document.querySelector(".add-a-book").onclick = function() {
                if(document.querySelector(".new-book-wrapper") == null) document.body.appendChild(newBook)
                document.querySelector(".new-book-wrapper").hidden = !document.querySelector(".new-book-wrapper").hidden
                document.querySelector(".close-button").onclick = function () {
                    this.closest(".new-book-wrapper").remove()
                }
                document.body.querySelector(".new-book").querySelector(".submit").onclick = function () {
                    bookClone.querySelector("img").src = document.querySelector("#img").files[0].name;
                    bookClone.querySelector(".book-name").innerHTML = document.querySelector("#name").value;
                    bookClone.querySelector(".author").innerHTML = document.querySelector("#author").value;
                    bookClone.dataset.price = document.querySelector("#price").value;
                    bookClone.dataset.time = new Date()
                    for (var i = 0; i < 5; i++) {
                        bookClone.querySelectorAll("input")[i].name = "star" + (document.querySelectorAll(".book-container").length + 1)
                        bookClone.querySelectorAll("input")[i].id = "star-" + (5*document.querySelectorAll(".book-container").length + 1 + i)
                        bookClone.querySelectorAll("label")[i].id = "star-" + (5*document.querySelectorAll(".book-container").length + 1 + i)
                    }
                    document.querySelector(".main-content").appendChild(bookClone);
                    this.closest(".new-book-wrapper").remove()
                    allBooks = document.body.querySelectorAll(".book-container")
                }
            }
            document.querySelector("input[type = 'search']").onchange = function() {
                if (this.value == "" || document.querySelectorAll(".book-container").length != allBooks.length) showAllBooks()
                var str,substr,
                    i = 0;
                substr = this.value.toLowerCase()
                outer: while (i < document.querySelectorAll(".book-container").length) {
                        for (var j = 0; j < document.querySelectorAll(".book-container")[i].querySelectorAll("p").length; j++) {
                            str = document.querySelectorAll(".book-container")[i].querySelectorAll("p")[j].innerHTML.toLowerCase()
                            if (str.indexOf(substr) != -1) {
                                i++;
                                continue outer
                            }
                        }
                        document.querySelectorAll(".book-container")[i].remove()
                }
            }
            function showAllBooks() {
                document.querySelector(".main-content").innerHTML = "";
                for (var i = 0; i < allBooks.length; i++) {
                    document.querySelector(".main-content").appendChild(allBooks[i])
                }
                prevTarget = this
            }
        </script>
    </body>
</html>